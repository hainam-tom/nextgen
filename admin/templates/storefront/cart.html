{% extends 'layout.html' %}
{% block title %}Your cart{% endblock %}
{% block content %}
  <h1 class="h3 mb-4">Your cart</h1>
  {% if items %}
    <form method="post" action="{{ url_for('cart_update') }}" class="mb-3">
      <div class="list-group mb-3">
        {% for item in items %}
          <div class="list-group-item bg-dark text-light d-flex justify-content-between align-items-center">
            <div>
              <div class="fw-semibold">{{ item.product.name }}</div>
              <small class="text-secondary">${{ '%.2f'|format(item.product.price) }} each</small>
            </div>
            <div class="d-flex align-items-center gap-2">
              <input type="number" min="0" name="quantity_{{ item.product.id }}" value="{{ item.quantity }}" class="form-control form-control-sm" style="width:90px">
              <span class="fw-semibold">${{ '%.2f'|format(item.total) }}</span>
            </div>
          </div>
        {% endfor %}
      </div>
      <div class="d-flex justify-content-between align-items-center mb-3">
        <div class="fw-bold">Total</div>
        <div class="fs-5">${{ '%.2f'|format(total) }}</div>
      </div>
      <button type="submit" class="btn btn-primary">Update quantities</button>
    </form>
    <form method="post" action="{{ url_for('cart_clear') }}">
      <button type="submit" class="btn btn-outline-light">Clear cart</button>
    </form>
  {% else %}
    <div class="alert alert-info">Your cart is empty.</div>
  {% endif %}
{% endblock %}
